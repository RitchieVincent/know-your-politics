$(function(){$.fx.speeds.slow=800,$.fx.speeds.xslow=1200;var i,s,e="1",t=0,a=(Object.keys(text.questions).length,""),r=0,n=0,l=0,c=0,p=0,u=0,d=0,h=0,m=0,y=0,g=0,b="labourChoice conservativeChoice libdemChoice ukipChoice",v=document.getElementById("correctAudio"),f=document.getElementById("incorrectAudio"),C=document.getElementById("timeUpAudio"),w=document.getElementById("resultAudio"),S=0,k=[];$(".downButton").click(function(){$("html,body").animate({scrollTop:$(".wellLabour").offset().top-50},"slow")}),setTimeout(function(){$("#instructionsModal").modal({backdrop:"static",keyboard:!1})},2e3);var T=function(t,o,i,a){$("#selectedSection").addClass(""+o),$(".selectedPartyTitle").append("<h1>"+t+"</h1>"),$("#"+i).fadeIn("slow"),e="2",$(".partyBtn").prop("disabled",!0),$("#questionSection").slideToggle("slow"),$("#questionSection").addClass(""+a)};$(".partyBtn").click(function(o){function L(){if(10>t){var e=setTimeout(function(){$("#questionSection").removeClass(b),B(),I(),$(".correctParty").html(""),$(".correctParty").fadeTo(200,0)},4e3);e()}else $(".choiceBtn").prop("disabled",!0),$("#questionSection").slideUp(3e3,function(){O()})}function I(){$(".loadingBar").addClass("loadingBarAnimate"),$(".loadingBar").one($.support.transition.end,function(){$(".loadingBar").removeClass("loadingBarAnimate"),$(".choiceBtn").prop("disabled",!0),A("timeUp",""),L()})}function B(){i=k[S],S++,document.getElementById("theQuestions").innerHTML="<h3>"+text.questions[i].question+"</h3><p>Do you agree with this policy?</p>",s=text.questions[i].party,t++,"labourChoice"==text.questions[i].party&&r++,"conservativeChoice"==text.questions[i].party&&l++,"libdemChoice"==text.questions[i].party&&p++,"ukipChoice"==text.questions[i].party&&d++,$(".choiceBtn").prop("disabled",!1)}function q(){isNaN(y)&&(y=0)}function Y(e,t,o,i){var a=google.visualization.arrayToDataTable([["Party","Amount agreed with"],["Labour",e],["UKIP",t],["Liberal democrat",o],["Conservative",i]]),s={pieHole:.5,pieSliceTextStyle:{color:"black"},colors:["#e74c3c","#9b59b6","#F7E041","#3498db"],backgroundColor:"#009688",pieSliceBorderColor:"#009688",legend:"none",chartArea:{top:0,height:300},height:300},r=new google.visualization.PieChart(document.getElementById("resultsChart"));r.draw(a,s)}function x(e,t){$(".scoreNumber").html("<p>You got "+e+"% of the "+P+" questions correct.</p>"),Y(n,h,u,c),n>=c&&n>=u&&n>=h&&$(".resultsLinks").append("labourChoice"==a?"<p>You seem to know a lot about your party. Well done!</p>":"<p>You seemed to agree with The Labour party quite a lot. <a href='http://www.labour.org.uk/issues' target='_blank'>Click here to read more about this party.</a></p>"),c>=n&&c>=u&&c>=h&&$(".resultsLinks").append("conservativeChoice"==a?"<p>You seem to know a lot about your party. Well done!</p>":"<p>You seemed to agree with The Conservative party quite a lot. <a href='https://www.conservatives.com/Plan.aspx' target='_blank'>Click here to read more about this party.</a></p>"),u>=c&&u>=n&&u>=h&&$(".resultsLinks").append("libdemChoice"==a?"<p>You seem to know a lot about your party. Well done!</p>":"<p>You seemed to agree with The Liberal Democrats party quite a lot. <a href='http://www.libdems.org.uk/issues' target='_blank'>Click here to read more about this party.</a></p>"),h>=c&&h>=u&&h>=n&&$(".resultsLinks").append("ukipChoice"==a?"<p>You seem to know a lot about your party. Well done!</p>":"<p>You seemed to agree with UKIP quite a lot. <a href='http://www.ukip.org/policies_for_people' target='_blank'>Click here to read more about this party.</a></p>"),$(".moreResults").append("<p>Your overall score is: "+t+"</p><hr/>"),0>t&&$(".moreResults").append("<p>Your overall score is negative. What this means is that you tended to either agree with parties that were not the one you support, or you disagreed with your the policies of the party you support. Maybe you don't Know Your Politics as well as you thought!</p><hr/>"),0==t&&$(".moreResults").append("<p>Your overall score is neutral. What this means is that you tended to agree with some and disagree with other policies relating to your party. You Know Your Politics a bit, but not much!</p><hr/>"),t>=1&&$(".moreResults").append("<p>Your overall score is positive. What this means is that you tended to agree with your chosen party. You seem to Know Your Politics!</p><hr/>"),$(".moreResults").append("<p><img src='img/labourIcon.png' class='resultIcon'/> You got "+n+"/"+r+" Labour party questions correct.</p>"),$(".moreResults").append("<p><img src='img/conservativeIcon.png' class='resultIcon'/> You got "+c+"/"+l+" Conservative party questions correct.</p>"),$(".moreResults").append("<p><img src='img/libdemIcon.png' class='resultIcon'/> You got "+u+"/"+p+" Liberal Democrat party questions correct.</p>"),$(".moreResults").append("<p><img src='img/ukipIcon.png' class='resultIcon'/> You got "+h+"/"+d+" UKIP questions correct.</p>"),$(".moreResultsBtn").click(function(){$(".moreResultsSection").slideToggle("slow",function(){window.scrollTo(0,document.body.scrollHeight)})})}function O(){w.play(),$("#resultSection").slideDown("xslow",function(){$("html,body").animate({scrollTop:$("#resultSection").offset().top},"slow")}),"labourChoice"==a&&(y=m/r*100,y=y.toFixed(),q(r),x(y,g)),"conservativeChoice"==a&&(y=m/l*100,y=y.toFixed(),q(l),x(y,g)),"libdemChoice"==a&&(y=m/p*100,y=y.toFixed(),q(p),x(y,g)),"ukipChoice"==a&&(y=m/d*100,y=y.toFixed(),q(d),x(y,g))}function A(e){"labourChoice"==e&&($("#questionSection").removeClass(b),$("#questionSection").addClass("labourChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Labour policy!</p>"),f.play()),"conservativeChoice"==e&&($("#questionSection").removeClass(b),$("#questionSection").addClass("conservativeChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Conservative policy!</p>"),f.play()),"libdemChoice"==e&&($("#questionSection").removeClass(b),$("#questionSection").addClass("libdemChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Liberal Democrat policy!</p>"),f.play()),"ukipChoice"==e&&($("#questionSection").removeClass(b),$("#questionSection").addClass("ukipChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a UKIP policy!</p>"),f.play()),"timeUp"==e&&($(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>You ran out of time!</p>"),C.play())}function Q(){$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Correct!</p>"),v.play()}function U(e){"labourChoice"==e&&n++,"conservativeChoice"==e&&c++,"libdemChoice"==e&&u++,"ukipChoice"==e&&h++}function D(e,t,o){"agreeChoice"==e&&(t==o?($(".loadingBar").removeClass("loadingBarAnimate"),g++,m++,U(t),Q()):($(".loadingBar").removeClass("loadingBarAnimate"),A(t,o),U(t),g--)),"disagreeChoice"==e&&(t==o?($(".loadingBar").removeClass("loadingBarAnimate"),A(t,o),g--):($(".loadingBar").removeClass("loadingBarAnimate"),g++,Q()))}var P=o.target.id;"labourVote"==P&&"1"==e?(P="The Labour Party",a="labourChoice",imageShow="labourSelectedImage",choiceClassQuestionSection="labourQuestionSection",T(P,a,imageShow,choiceClassQuestionSection)):"conservativeVote"==P&&"1"==e?(P="The Conservative Party",a="conservativeChoice",imageShow="conservativeSelectedImage",choiceClassQuestionSection="conservativeQuestionSection",T(P,a,imageShow,choiceClassQuestionSection)):"libdemVote"==P&&"1"==e?(P="The Liberal Democrats",a="libdemChoice",imageShow="libdemSelectedImage",choiceClassQuestionSection="libdemQuestionSection",T(P,a,imageShow,choiceClassQuestionSection)):"ukipVote"==P&&"1"==e?(P="The United Kingdom Independence Party",a="ukipChoice",imageShow="ukipSelectedImage",choiceClassQuestionSection="ukipQuestionSection",T(P,a,imageShow,choiceClassQuestionSection)):"noVote"==P&&"1"==e&&(P="No preference",a="noChoice",imageShow="novoteSelectedImage",choiceClassQuestionSection="novoteQuestionSection",T(P,a,imageShow,choiceClassQuestionSection)),$("#selectedSection").slideDown("slow"),$("html,body").animate({scrollTop:$("#selectedSection").offset().top},"xslow"),I(),scramble=function(e){for(;e.length>0;)k.push(e.splice(Math.floor(Math.random()*e.length),1)[0]);return k},scramble([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]),B(),$(".choiceBtn").click(function(){$(".choiceBtn").prop("disabled",!0);var t=this.id;D(t,s,a),L()})}),$("#logo").addClass("animated rubberBand"),$(".headerTitle").addClass("animated bounceInUp"),$(".headerTitle2").addClass("animated bounceInLeft"),$(".headerTitle3").addClass("animated bounceInRight"),$(".headerDownBtn").addClass("animated flip"),$("#aboutLink").addClass("animated fadeInRight"),$("#contactLink").addClass("animated fadeInLeft"),$("#aboutLink").removeClass("invisible"),$("#contactLink").removeClass("invisible"),Opentip.styles.labourStyle={className:"labourTooltip",delay:0,tipJoint:"bottom","extends":"glass",stemLength:0},Opentip.styles.conservativeStyle={className:"conservativeTooltip",delay:0,tipJoint:"bottom","extends":"glass",stemLength:0},Opentip.styles.libdemStyle={className:"libdemTooltip",delay:0,tipJoint:"bottom","extends":"glass",stemLength:0},Opentip.styles.ukipStyle={className:"ukipTooltip",delay:0,tipJoint:"bottom","extends":"glass",stemLength:0},new Opentip(".law","The Labour Party Website",{style:"labourStyle"}),new Opentip(".laf","The Labour Party Facebook page",{style:"labourStyle"}),new Opentip(".lat","The Labour Party Twitter page",{style:"labourStyle"}),new Opentip(".cow","The Conservative Party Website",{style:"conservativeStyle"}),new Opentip(".cof","The Conservative Party Facebook page",{style:"conservativeStyle"}),new Opentip(".cot","The Conservative Party Twitter page",{style:"conservativeStyle"}),new Opentip(".liw","The Liberal Democrat Party Website",{style:"libdemStyle"}),new Opentip(".lif","The Liberal Democrat Party Facebook page",{style:"libdemStyle"}),new Opentip(".lit","The Liberal Democrat Party Twitter page",{style:"libdemStyle"}),new Opentip(".ukw","The UKIP Website",{style:"ukipStyle"}),new Opentip(".ukf","The UKIP Facebook page",{style:"ukipStyle"}),new Opentip(".ukt","The UKIP Twitter page",{style:"ukipStyle"})});
