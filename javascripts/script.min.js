$(function(){$.fx.speeds.slow=800,$.fx.speeds.xslow=1200;var i,a,e="1",o=0,t=Object.keys(text.questions).length,c=0,r=0,s=0,n=0,l=0,u=0,d=0,h="labourChoice conservativeChoice libdemChoice ukipChoice",p=document.getElementById("correctAudio"),m=document.getElementById("incorrectAudio"),f=document.getElementById("timeUpAudio"),v=document.getElementById("resultAudio");$(".headerDownBtn").click(function(){$("html,body").animate({scrollTop:$(".wellLabour").offset().top-50},"slow")});var C=function(o,t,i,a){$("#selectedSection").addClass(""+t),$(".selectedPartyTitle").append("<h1>"+o+"</h1>"),$("#"+i).fadeIn("slow"),e="2",$(".partyBtn").prop("disabled",!0),$("#questionSection").slideToggle("slow"),$("#questionSection").addClass(""+a)};$(".partyBtn").click(function(y){function g(){if(10>o){var e=setTimeout(function(){$("#questionSection").removeClass(h),w(),q(),$(".correctParty").html(""),$(".correctParty").fadeTo(200,0)},4e3);e()}else $(".choiceBtn").prop("disabled",!0),$("#questionSection").slideToggle(3e3,function(){P()})}function q(){$(".loadingBar").addClass("loadingBarAnimate"),$(".loadingBar").one($.support.transition.end,function(){$(".loadingBar").removeClass("loadingBarAnimate"),T("timeUp",""),g()})}function w(){i=Math.floor(Math.random()*t+0),document.getElementById("theQuestions").innerHTML="<h3>"+text.questions[i].question+"</h3>",a=text.questions[i].party,o++,"labourChoice"==text.questions[i].party&&c++,"conservativeChoice"==text.questions[i].party&&r++,"libdemChoice"==text.questions[i].party&&s++,"ukipChoice"==text.questions[i].party&&n++,$(".choiceBtn").prop("disabled",!1)}function B(){isNaN(u)&&(u=0)}function P(){v.play(),$("#resultSection").slideDown("xslow",function(){window.scrollTo(0,document.body.scrollHeight)}),"labourChoice"==b&&(u=l/c*100,u=u.toFixed(),B(c),$(".scoreNumber").html("<p>You got "+u+"% of the Labour questions correct.</p>"),$(".scoreNumber").append("<p>Your overall score is: "+d+"</p>")),"conservativeChoice"==b&&(u=l/r*100,u=u.toFixed(),B(r),$(".scoreNumber").html("<p>You got "+u+"% of the Conservative questions correct.</p>"),$(".scoreNumber").append("<p>Your overall score is: "+d+"</p>")),"libdemChoice"==b&&(u=l/s*100,u=u.toFixed(),B(s),$(".scoreNumber").html("<p>You got "+u+"% of the Liberal Democrat questions correct.</p>"),$(".scoreNumber").append("<p>Your overall score is: "+d+"</p>")),"ukipChoice"==b&&(u=l/n*100,u=u.toFixed(),B(n),$(".scoreNumber").html("<p>You got "+u+"% of the UKIP questions correct.</p>"),$(".scoreNumber").append("<p>Your overall score is: "+d+"</p>"))}function T(e){"labourChoice"==e&&($("#questionSection").removeClass(h),$("#questionSection").addClass("labourChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Labour policy!</p>"),m.play()),"conservativeChoice"==e&&($("#questionSection").removeClass(h),$("#questionSection").addClass("conservativeChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Conservative policy!</p>"),m.play()),"libdemChoice"==e&&($("#questionSection").removeClass(h),$("#questionSection").addClass("libdemChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Liberal Democrat policy!</p>"),m.play()),"ukipChoice"==e&&($("#questionSection").removeClass(h),$("#questionSection").addClass("ukipChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a UKIP policy!</p>"),m.play()),"timeUp"==e&&($(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>You ran out of time!</p>"),f.play())}function x(){$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Correct!</p>"),p.play()}function Q(e,o,t){"agreeChoice"==e&&(o==t?($(".loadingBar").removeClass("loadingBarAnimate"),d++,l++,x()):($(".loadingBar").removeClass("loadingBarAnimate"),T(o,t),d--)),"disagreeChoice"==e&&(o==t?($(".loadingBar").removeClass("loadingBarAnimate"),T(o,t),d--):($(".loadingBar").removeClass("loadingBarAnimate"),d++,x()))}var S=y.target.id,b="";"labourVote"==S&&"1"==e?(S="The Labour Party",b="labourChoice",imageShow="labourSelectedImage",choiceClassQuestionSection="labourQuestionSection",C(S,b,imageShow,choiceClassQuestionSection)):"conservativeVote"==S&&"1"==e?(S="The Conservative Party",b="conservativeChoice",imageShow="conservativeSelectedImage",choiceClassQuestionSection="conservativeQuestionSection",C(S,b,imageShow,choiceClassQuestionSection)):"libdemVote"==S&&"1"==e?(S="The Liberal Democrats",b="libdemChoice",imageShow="libdemSelectedImage",choiceClassQuestionSection="libdemQuestionSection",C(S,b,imageShow,choiceClassQuestionSection)):"ukipVote"==S&&"1"==e?(S="The United Kingdom Independence Party",b="ukipChoice",imageShow="ukipSelectedImage",choiceClassQuestionSection="ukipQuestionSection",C(S,b,imageShow,choiceClassQuestionSection)):"noVote"==S&&"1"==e&&(S="No preference",b="noChoice",imageShow="novoteSelectedImage",choiceClassQuestionSection="novoteQuestionSection",C(S,b,imageShow,choiceClassQuestionSection)),$("#selectedSection").slideDown("slow"),$("html,body").animate({scrollTop:$("#selectedSection").offset().top},"xslow"),q(),w(),$(".choiceBtn").click(function(){$(".choiceBtn").prop("disabled",!0);var o=this.id;Q(o,a,b),g()})})});
