$(function(){$.fx.speeds.slow=800,$.fx.speeds.xslow=1200;var t,c,e="1",o=0,i=Object.keys(text.questions).length,a=0,s=0,r=0,n=0,l=0,u=0,d=0,h="labourChoice conservativeChoice libdemChoice ukipChoice",p=document.getElementById("correctAudio"),m=document.getElementById("incorrectAudio"),f=document.getElementById("timeUpAudio"),v=document.getElementById("resultAudio");$(".headerDownBtn").click(function(){$("html,body").animate({scrollTop:$(".wellLabour").offset().top-50},"slow")});var C=function(o,i,t,c){$("#selectedSection").addClass(""+i),$(".selectedPartyTitle").append("<h1>"+o+"</h1>"),$("#"+t).fadeIn("slow"),e="2",$(".partyBtn").prop("disabled",!0),$("#questionSection").slideToggle("slow"),$("#questionSection").addClass(""+c)};$(".partyBtn").click(function(S){function g(){if(10>o){var e=setTimeout(function(){$("#questionSection").removeClass(h),w(),q(),$(".correctParty").html(""),$(".correctParty").fadeTo(200,0)},4e3);e()}else $(".choiceBtn").prop("disabled",!0),$("#questionSection").slideToggle(3e3,function(){P()})}function q(){$(".loadingBar").addClass("loadingBarAnimate"),$(".loadingBar").one($.support.transition.end,function(){$(".loadingBar").removeClass("loadingBarAnimate"),B("timeUp",""),g()})}function w(){t=Math.floor(Math.random()*i+0),document.getElementById("theQuestions").innerHTML="<h3>"+text.questions[t].question+"</h3>",c=text.questions[t].party,o++,"labourChoice"==text.questions[t].party&&a++,"conservativeChoice"==text.questions[t].party&&s++,"libdemChoice"==text.questions[t].party&&r++,"ukipChoice"==text.questions[t].party&&n++,$(".choiceBtn").prop("disabled",!1)}function T(){isNaN(u)&&(u=0)}function P(){v.play(),$("#resultSection").slideDown("xslow",function(){window.scrollTo(0,document.body.scrollHeight)}),"labourChoice"==b&&(u=l/a*100,u=u.toFixed(),T(a),$(".scoreNumber").html("<p>You got "+u+"% of the Labour questions correct.</p>"),$(".scoreNumber").append("<p>Your overall score is: "+d+"</p>")),"conservativeChoice"==b&&(u=l/s*100,u=u.toFixed(),T(s),$(".scoreNumber").html("<p>You got "+u+"% of the Conservative questions correct.</p>"),$(".scoreNumber").append("<p>Your overall score is: "+d+"</p>")),"libdemChoice"==b&&(u=l/r*100,u=u.toFixed(),T(r),$(".scoreNumber").html("<p>You got "+u+"% of the Liberal Democrat questions correct.</p>"),$(".scoreNumber").append("<p>Your overall score is: "+d+"</p>")),"ukipChoice"==b&&(u=l/n*100,u=u.toFixed(),T(n),$(".scoreNumber").html("<p>You got "+u+"% of the UKIP questions correct.</p>"),$(".scoreNumber").append("<p>Your overall score is: "+d+"</p>"))}function B(e){"labourChoice"==e&&($("#questionSection").removeClass(h),$("#questionSection").addClass("labourChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Labour policy!</p>"),m.play()),"conservativeChoice"==e&&($("#questionSection").removeClass(h),$("#questionSection").addClass("conservativeChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Conservative policy!</p>"),m.play()),"libdemChoice"==e&&($("#questionSection").removeClass(h),$("#questionSection").addClass("libdemChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Liberal Democrat policy!</p>"),m.play()),"ukipChoice"==e&&($("#questionSection").removeClass(h),$("#questionSection").addClass("ukipChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a UKIP policy!</p>"),m.play()),"timeUp"==e&&($(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>You ran out of time!</p>"),f.play())}function x(){$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Correct!</p>"),p.play()}function Q(e,o,i){"agreeChoice"==e&&(o==i?($(".loadingBar").removeClass("loadingBarAnimate"),d++,l++,x()):($(".loadingBar").removeClass("loadingBarAnimate"),B(o,i),d--)),"disagreeChoice"==e&&(o==i?($(".loadingBar").removeClass("loadingBarAnimate"),B(o,i),d--):($(".loadingBar").removeClass("loadingBarAnimate"),d++,x()))}var y=S.target.id,b="";"labourVote"==y&&"1"==e?(y="The Labour Party",b="labourChoice",imageShow="labourSelectedImage",choiceClassQuestionSection="labourQuestionSection",C(y,b,imageShow,choiceClassQuestionSection)):"conservativeVote"==y&&"1"==e?(y="The Conservative Party",b="conservativeChoice",imageShow="conservativeSelectedImage",choiceClassQuestionSection="conservativeQuestionSection",C(y,b,imageShow,choiceClassQuestionSection)):"libdemVote"==y&&"1"==e?(y="The Liberal Democrats",b="libdemChoice",imageShow="libdemSelectedImage",choiceClassQuestionSection="libdemQuestionSection",C(y,b,imageShow,choiceClassQuestionSection)):"ukipVote"==y&&"1"==e?(y="The United Kingdom Independence Party",b="ukipChoice",imageShow="ukipSelectedImage",choiceClassQuestionSection="ukipQuestionSection",C(y,b,imageShow,choiceClassQuestionSection)):"noVote"==y&&"1"==e&&(y="No preference",b="noChoice",imageShow="novoteSelectedImage",choiceClassQuestionSection="novoteQuestionSection",C(y,b,imageShow,choiceClassQuestionSection)),$("#selectedSection").slideDown("slow"),$("html,body").animate({scrollTop:$("#selectedSection").offset().top},"xslow"),q(),w(),$(".choiceBtn").click(function(){$(".choiceBtn").prop("disabled",!0);var o=this.id;Q(o,c,b),g()})})});
