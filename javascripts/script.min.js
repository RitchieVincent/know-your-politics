$(function(){$(document).tooltip(),$.fx.speeds.slow=800,$.fx.speeds.xslow=1200;var i,a,e="1",t=0,o=Object.keys(text.questions).length,n=0,l=0,s=0,r=0,c=0,d=0,u=0,p=0,h=0,m=0,y=0,v="labourChoice conservativeChoice libdemChoice ukipChoice",b=document.getElementById("correctAudio"),f=document.getElementById("incorrectAudio"),C=document.getElementById("timeUpAudio"),g=document.getElementById("resultAudio");$(".headerDownBtn").click(function(){$("html,body").animate({scrollTop:$(".wellLabour").offset().top-50},"slow")}),$(".modalDownBtn").click(function(){$("html,body").animate({scrollTop:$(".wellLabour").offset().top-50},"slow")}),setTimeout(function(){$("#instructionsModal").modal({backdrop:"static",keyboard:!1})},2e3);var S=function(t,o,i,a){$("#selectedSection").addClass(""+o),$(".selectedPartyTitle").append("<h1>"+t+"</h1>"),$("#"+i).fadeIn("slow"),e="2",$(".partyBtn").prop("disabled",!0),$("#questionSection").slideToggle("slow"),$("#questionSection").addClass(""+a)};$(".partyBtn").click(function(w){function P(){if(10>t){var e=setTimeout(function(){$("#questionSection").removeClass(v),L(),B(),$(".correctParty").html(""),$(".correctParty").fadeTo(200,0)},4e3);e()}else $(".choiceBtn").prop("disabled",!0),$("#questionSection").slideUp(3e3,function(){O()})}function B(){$(".loadingBar").addClass("loadingBarAnimate"),$(".loadingBar").one($.support.transition.end,function(){$(".loadingBar").removeClass("loadingBarAnimate"),$(".choiceBtn").prop("disabled",!0),A("timeUp",""),P()})}function L(){i=Math.floor(Math.random()*o+0),document.getElementById("theQuestions").innerHTML="<h3>"+text.questions[i].question+"</h3><p>Do you agree with this policy?</p>",a=text.questions[i].party,t++,"labourChoice"==text.questions[i].party&&n++,"conservativeChoice"==text.questions[i].party&&s++,"libdemChoice"==text.questions[i].party&&c++,"ukipChoice"==text.questions[i].party&&u++,$(".choiceBtn").prop("disabled",!1)}function I(){isNaN(m)&&(m=0)}function q(e,t,o,i){var a=google.visualization.arrayToDataTable([["Party","Amount agreed with"],["Labour",e],["UKIP",t],["Liberal democrat",o],["Conservative",i]]),n={pieHole:.5,pieSliceTextStyle:{color:"black"},colors:["#e74c3c","#9b59b6","#F7E041","#3498db"],backgroundColor:"#009688",pieSliceBorderColor:"#009688",legend:"none",chartArea:{top:0,height:300},height:300},l=new google.visualization.PieChart(document.getElementById("resultsChart"));l.draw(a,n)}function x(e,t){$(".scoreNumber").html("<p>You got "+e+"% of the "+T+" questions correct.</p>"),$(".scoreNumber").append("<p>Your overall score is: "+t+"</p>"),q(l,p,d,r)}function O(){g.play(),$("#resultSection").slideDown("xslow",function(){window.scrollTo(0,document.body.scrollHeight)}),"labourChoice"==k&&(m=h/n*100,m=m.toFixed(),I(n),x(m,y)),"conservativeChoice"==k&&(m=h/s*100,m=m.toFixed(),I(s),x(m,y)),"libdemChoice"==k&&(m=h/c*100,m=m.toFixed(),I(c),x(m,y)),"ukipChoice"==k&&(m=h/u*100,m=m.toFixed(),I(u),x(m,y))}function A(e){"labourChoice"==e&&($("#questionSection").removeClass(v),$("#questionSection").addClass("labourChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Labour policy!</p>"),f.play()),"conservativeChoice"==e&&($("#questionSection").removeClass(v),$("#questionSection").addClass("conservativeChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Conservative policy!</p>"),f.play()),"libdemChoice"==e&&($("#questionSection").removeClass(v),$("#questionSection").addClass("libdemChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a Liberal Democrat policy!</p>"),f.play()),"ukipChoice"==e&&($("#questionSection").removeClass(v),$("#questionSection").addClass("ukipChoice"),$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Actually, this is a UKIP policy!</p>"),f.play()),"timeUp"==e&&($(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>You ran out of time!</p>"),C.play())}function Q(){$(".correctParty").fadeTo(500,1),$(".correctParty").html("<p>Correct!</p>"),b.play()}function D(e){"labourChoice"==e&&l++,"conservativeChoice"==e&&r++,"libdemChoice"==e&&d++,"ukipChoice"==e&&p++}function U(e,t,o){"agreeChoice"==e&&(t==o?($(".loadingBar").removeClass("loadingBarAnimate"),y++,h++,D(t),Q()):($(".loadingBar").removeClass("loadingBarAnimate"),A(t,o),D(t),y--)),"disagreeChoice"==e&&(t==o?($(".loadingBar").removeClass("loadingBarAnimate"),A(t,o),y--):($(".loadingBar").removeClass("loadingBarAnimate"),y++,Q()))}var T=w.target.id,k="";"labourVote"==T&&"1"==e?(T="The Labour Party",k="labourChoice",imageShow="labourSelectedImage",choiceClassQuestionSection="labourQuestionSection",S(T,k,imageShow,choiceClassQuestionSection)):"conservativeVote"==T&&"1"==e?(T="The Conservative Party",k="conservativeChoice",imageShow="conservativeSelectedImage",choiceClassQuestionSection="conservativeQuestionSection",S(T,k,imageShow,choiceClassQuestionSection)):"libdemVote"==T&&"1"==e?(T="The Liberal Democrats",k="libdemChoice",imageShow="libdemSelectedImage",choiceClassQuestionSection="libdemQuestionSection",S(T,k,imageShow,choiceClassQuestionSection)):"ukipVote"==T&&"1"==e?(T="The United Kingdom Independence Party",k="ukipChoice",imageShow="ukipSelectedImage",choiceClassQuestionSection="ukipQuestionSection",S(T,k,imageShow,choiceClassQuestionSection)):"noVote"==T&&"1"==e&&(T="No preference",k="noChoice",imageShow="novoteSelectedImage",choiceClassQuestionSection="novoteQuestionSection",S(T,k,imageShow,choiceClassQuestionSection)),$("#selectedSection").slideDown("slow"),$("html,body").animate({scrollTop:$("#selectedSection").offset().top},"xslow"),B(),L(),$(".choiceBtn").click(function(){$(".choiceBtn").prop("disabled",!0);var t=this.id;U(t,a,k),P()})}),$("#logo").addClass("animated rubberBand"),$(".headerTitle").addClass("animated bounceInUp"),$(".headerTitle2").addClass("animated bounceInLeft"),$(".headerTitle3").addClass("animated bounceInRight"),$(".headerDownBtn").addClass("animated flip"),$("#aboutLink").addClass("animated fadeInRight"),$("#contactLink").addClass("animated fadeInLeft"),$("#aboutLink").removeClass("invisible"),$("#contactLink").removeClass("invisible"),Opentip.styles.labourStyle={className:"labourTooltip",delay:0,tipJoint:"bottom","extends":"glass",stemLength:0},Opentip.styles.conservativeStyle={className:"conservativeTooltip",delay:0,tipJoint:"bottom","extends":"glass",stemLength:0},Opentip.styles.libdemStyle={className:"libdemTooltip",delay:0,tipJoint:"bottom","extends":"glass",stemLength:0},Opentip.styles.ukipStyle={className:"ukipTooltip",delay:0,tipJoint:"bottom","extends":"glass",stemLength:0},new Opentip(".law","The Labour Party Website",{style:"labourStyle"}),new Opentip(".laf","The Labour Party Facebook page",{style:"labourStyle"}),new Opentip(".lat","The Labour Party Twitter page",{style:"labourStyle"}),new Opentip(".cow","The Conservative Party Website",{style:"conservativeStyle"}),new Opentip(".cof","The Conservative Party Facebook page",{style:"conservativeStyle"}),new Opentip(".cot","The Conservative Party Twitter page",{style:"conservativeStyle"}),new Opentip(".liw","The Liberal Democrat Party Website",{style:"libdemStyle"}),new Opentip(".lif","The Liberal Democrat Party Facebook page",{style:"libdemStyle"}),new Opentip(".lit","The Liberal Democrat Party Twitter page",{style:"libdemStyle"}),new Opentip(".ukw","The UKIP Website",{style:"ukipStyle"}),new Opentip(".ukf","The UKIP Facebook page",{style:"ukipStyle"}),new Opentip(".ukt","The UKIP Twitter page",{style:"ukipStyle"})});
